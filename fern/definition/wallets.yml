# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

service:
  auth: true
  base-path: /wallets
  endpoints:
    create:
      path: ""
      method: POST
      docs: Creates a wallet with provided metadata.
      display-name: Create Wallet
      request: CreateWalletRequest
      response: CreateWalletResponse
      errors:
        - commons.BadRequestError
      examples:
        - name: Example1
          request: $CreateWalletRequest.Example1
          response:
            body: $CreateWalletResponse.Example1

    list:
      path: ""
      method: GET
      docs: Lists wallets created in the project. Supports filter by network.
      display-name: List Wallets
      request:
        name: ListWalletsRequest
        query-parameters:
          network:
            type: optional<string>
          page:
            type: optional<integer>
          page_size:
            type: optional<string>
      response: list<ListWalletsResponseItem>

types:
  CreateWalletRequest:
    properties:
      network: string
      name:
        docs: wallet name
        type: optional<string>
      owner_id:
        docs: >-
          optional id to associated the wallet with. e.g. user uuid in
          your application. When provided, the same owner_id  will have
          the Ethereum address across EVM compatible networks.
        type: optional<string>
      secret:
        type: string
    examples:
      - name: Example1
        value:
          network: Polygon
          name: My Wallet
          owner_id: 58c9095e-24db-43eb-b49d-b78f72573a29
          secret: testnet-secret

  CreateWalletResponse:
    properties:
      id: string
      created_at: string
      network: string
      name: optional<string>
      owner_id: optional<string>
      address: string
    examples:
      - name: Example1
        value:
          id: 5884bd1d-ecb3-41ea-bcc7-e9e3d229618f
          created_at: "2023-07-21T22:03:16Z"
          network: Polygon
          name: Joe's wallet
          owner_id: 58c9095e-24db-43eb-b49d-b78f72573a29
          address: "0x976Cf57B7EE1D84E73BE9115457889d49a8A1335"

  ListWalletsResponseItem:
    properties:
      id: string
      created_at: string
      network: string
      name: optional<string>
      owner_id: optional<string>
      address: string
