---
title: "Create Your First Wallet"
---

In this guide, we'll go over the steps to create your first user controlled wallet.

### User PIN

The `user_pin` set by the user can be a 6-digit pincode or a password. It is required to authorize interactions with their wallet.
The `user_pin` is used to encrypt the user's share of the private key, stored by WalletKit.
<Warning>
You must never store the `user_pin` on your servers.
</Warning>

### Prerequisites

- Sign up for your [WalletKit](https://app.usewalletkit.com/) developer account


### 1. Create a walletkit client

Install the corresponding walletkit sdk for your development platform. We'll use the [WalletKit-JS SDK](https://www.npmjs.com/package/walletkit-js) for this guide.

```bash Shell
npm install walletkit-js
```

Obtain WalletKit ProjectID from the [WalletKit Dashboard](https://app.usewalletkit.com/api-keys)

```javascript NextJS
// Create an instance of WalletKitClient
const wk = new WalletKitClient({
    projectId: "YOUR_PROJECT_ID", 
    environment: WalletKitEnvironment.Testnet, 
    // since we will be using walletkit authentication for this guide
    source: TokenSource.Walletkit,
});
```

### 2. Obtain a user session

When an instance of the client is initialized, it is unauthenticated by default. The developer must authenticate the user in order to call all authenticated endpoints. 
The developer can do so by:
1. Generate a new access token using WalletKit using one of the following methods:
    - Use the [Login with Email](/api-reference/users/login-with-email) + [Verify Login](/api-reference/users/verify-login) endpoints to get an access token
    - Use the [Login Anonymously](/api-reference/users/login-anonymously) endpoint to get an access token

2. Use an existing access token generated by [Supabase](https://supabase.io/), [Firebase](https://firebase.google.com/), or other compatible providers in the Authorization header.


We'll use access token generated by WalletKit for this guide.

```javascript NextJS
const resp = await wk.users.loginWithEmail({ "USER_EMAIL" });
if (!resp.ok) {
    throw resp.error.statusCode
}

const userId = resp.body.userId;
```

Now the user will receive an email with a verification code. Pass the code in [Verify Login](/api-reference/users/verify-login) to get the user session token.
```javascript NextJS
const resp = await wk.users.verifyLogin({
    userId: userId,
    verificationCode: "VERIFICATION_CODE_RECEIVED_IN_EMAIL",
})

if (!resp.ok) {
    throw resp.error.statusCode
}
```
The walletkit client is now authenticated with the user session token. We can now create a wallet for the user.

<Tip>
When the access token is generated using WalletKit, the SDK automatically handles the session token refreshing.
</Tip>

### 3. Create a wallet

Creating a wallet is as simple as making an API call. Since this is a user controlled wallet, you will use `user_pin` set by the user.

```javascript NextJS
const wallet = await wk.wallets.create({
    network: 'Base',
    name: "USER_EMAIL",
    ownerId: userId,
    controlMode: WalletControlMode.User,
    userPin: "USER_PROVIDED_PIN",
});

console.log("wallet", resp);
```

```javascript Example Response
wallet {
  ok: true,
  body: {
    id: '7471b9e9-13b1-4d87-9479-7dbfc2e132d7',
    createdAt: '2023-10-12T08:18:39.917889Z',
    network: 'Base',
    name: '{USER_EMAIL}',
    ownerId: '1a119cff-c78e-4791-94d0-45cdc3bc6de9',
    address: '0x99A83F5F3970a7E441Cb843fB780aa8089fad8FF'
  }
}
```